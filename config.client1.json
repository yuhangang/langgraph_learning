{
  "pipelines": [
    {
      "name": "Client 1 Multi-Step Support",
      "description": "Classify intent, retrieve tailored knowledge, and craft a guided response for Client 1 tickets.",
      "nodes": [
        {
          "id": "client1_intent_classifier",
          "type": "llm",
          "config": {
            "model": "gemini-2.0-flash-exp",
            "temperature": 0.25,
            "prompt": "You are the routing assistant for Client 1.\nClassify the customer's intent in fewer than 12 words and highlight urgency if expressed.\n\nRequest: {input}"
          }
        },
        {
          "id": "client1_kb_retrieval",
          "type": "retriever",
          "config": {
            "source": "client_1_kb",
            "top_k": 4
          }
        },
        {
          "id": "client1_response_generator",
          "type": "llm",
          "config": {
            "model": "gemini-2.0-flash-exp",
            "temperature": 0.65,
            "prompt": "You are a senior support engineer for Client 1.\nIntent: {intent}\nContext: {context}\n\nWrite a concise, step-by-step reply that references relevant policies and next steps."
          }
        }
      ],
      "edges": [
        { "from": "client1_intent_classifier", "to": "client1_kb_retrieval" },
        { "from": "client1_kb_retrieval", "to": "client1_response_generator" }
      ]
    }
  ],
  "knowledgeBases": {
    "client_1_kb": [
      {
        "id": "client1_workspace_access",
        "title": "Client 1 Workspace Access SOP",
        "summary": "Checklist for login failures and workspace membership issues.",
        "content": "Verify Okta status, confirm workspace membership via Admin Console, reset tokens, then escalate to infra if the audit log shows SSO propagation delays beyond 15 minutes.",
        "tags": ["workspace", "sso", "access"],
        "keywords": ["okta", "workspace", "token", "login"],
        "priority": 1.4
      },
      {
        "id": "client1_data_retention",
        "title": "Data Retention & Export Policy",
        "summary": "Guarantees and limitations for exporting historical tickets.",
        "content": "Client 1 retains resolved tickets for 18 months. Exports larger than 5GB must be scheduled during the maintenance window (Sat 1-3 AM PST).",
        "tags": ["compliance", "export"],
        "keywords": ["retention", "export", "tickets"],
        "priority": 1.2
      },
      {
        "id": "client1_billing_adjustment",
        "title": "Billing Adjustment Rules",
        "summary": "Refund/credit guardrails for subscription invoices.",
        "content": "Credits up to 12% may be approved when uptime drops below 99.5%. Anything above requires finance approval and a Jira ticket with SLA evidence.",
        "tags": ["billing", "credits"],
        "keywords": ["refund", "credit", "uptime"],
        "priority": 1.0
      },
      {
        "id": "client1_release_policies",
        "title": "Release Freeze Communication",
        "summary": "Preferred language when a release freeze impacts Client 1 tenants.",
        "content": "During a release freeze, confirm whether Client 1 is on lane blue or green. Share the freeze window, mitigation steps, and link to the trust portal update.",
        "tags": ["release", "freeze", "communication"],
        "keywords": ["trust portal", "freeze", "lane"],
        "priority": 0.9
      }
    ]
  },
  "metadata": {
    "owner": "client_1",
    "lastUpdated": "2024-06-01"
  }
}
